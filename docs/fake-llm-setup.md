# üé≠ –§–µ–π–∫–æ–≤—ã–π LLM –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ —Ñ–µ–π–∫–æ–≤—ã–π –∞–¥–∞–ø—Ç–µ—Ä (0 –∑–∞—Ç—Ä–∞—Ç)
php artisan llm:switch fake

# –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π Claude
php artisan llm:switch claude
```

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **üí∞ –ë–µ–∑ –∑–∞—Ç—Ä–∞—Ç**: –ù–∏–∫–∞–∫–∏—Ö —Ä–µ–∞–ª—å–Ω—ã—Ö API –≤—ã–∑–æ–≤–æ–≤
- **‚ö° –ë—ã—Å—Ç—Ä–æ**: –û—Ç–≤–µ—Ç—ã –∑–∞ 0.5 —Å–µ–∫—É–Ω–¥—ã
- **üéØ –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ**: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
- **ü§ñ –£–º–Ω—ã–π**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞

## üìã –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

1. **–î–æ–≥–æ–≤–æ—Ä –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** - –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Å–ª–æ–≤ "–¥–æ–≥–æ–≤–æ—Ä", "—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞"
2. **–¢—Ä—É–¥–æ–≤–æ–π –¥–æ–≥–æ–≤–æ—Ä** - –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Å–ª–æ–≤ "—Ä–∞–±–æ—Ç–Ω–∏–∫", "—Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å"
3. **–î–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã** - –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Å–ª–æ–≤ "–∞—Ä–µ–Ω–¥–∞", "–∫–≤–∞—Ä—Ç–∏—Ä–∞"

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í `.env`:
```env
LLM_DEFAULT_PROVIDER=fake
FAKE_LLM_BASE_DELAY=0.5        # –ó–∞–¥–µ—Ä–∂–∫–∞ –æ—Ç–≤–µ—Ç–∞
FAKE_LLM_SIMULATE_ERRORS=false # –°–∏–º—É–ª—è—Ü–∏—è –æ—à–∏–±–æ–∫
```

## üìù –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞

FakeAdapter –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON –≤ —Ç–æ–º –∂–µ —Ñ–æ—Ä–º–∞—Ç–µ, —á—Ç–æ –∏ —Ä–µ–∞–ª—å–Ω—ã–π Claude API - —Å –º–∞—Å—Å–∏–≤–æ–º `sections`, –≥–¥–µ –∫–∞–∂–¥–∞—è —Å–µ–∫—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç —è–∫–æ—Ä—å, –∫–æ–Ω—Ç–µ–Ω—Ç –∏ —Ç–∏–ø:

```json
{
  "sections": [
    {
      "anchor": "section_1_predmet_dogovora",
      "content": "–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏: –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –±—É–¥–µ—Ç –¥–µ–ª–∞—Ç—å —Å–∞–π—Ç –ø–æ –≤–∞—à–µ–º—É –æ–ø–∏—Å–∞–Ω–∏—é, –∞ –≤—ã –æ–±—è–∑—É–µ—Ç–µ—Å—å –µ–≥–æ –ø—Ä–∏–Ω—è—Ç—å –∏ –∑–∞–ø–ª–∞—Ç–∏—Ç—å –∑–∞ —Ä–∞–±–æ—Ç—É.",
      "type": "translation"
    },
    {
      "anchor": "section_2_stoimost_oplata",
      "content": "–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏: –í–µ—Å—å –ø—Ä–æ–µ–∫—Ç —Å—Ç–æ–∏—Ç 150 000 —Ä—É–±–ª–µ–π. –ü–æ–ª–æ–≤–∏–Ω—É –Ω—É–∂–Ω–æ –∑–∞–ø–ª–∞—Ç–∏—Ç—å –≤–ø–µ—Ä–µ–¥ –≤ —Ç–µ—á–µ–Ω–∏–µ 5 –¥–Ω–µ–π, –≤—Ç–æ—Ä—É—é –ø–æ–ª–æ–≤–∏–Ω—É - –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã.",
      "type": "translation"
    },
    {
      "anchor": "section_1_predmet_dogovora",
      "content": "–ù–µ—Ç —á–µ—Ç–∫–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è. –ï—Å–ª–∏ –¢–ó –±—É–¥–µ—Ç –Ω–µ–ø–æ–ª–Ω—ã–º –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–±–æ—Ç—ã, —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º –∏ –¥–æ–ø–ª–∞—Ç–∞–º.",
      "type": "risk"
    },
    {
      "anchor": "section_2_stoimost_oplata",
      "content": "–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —É–∫–∞–∑–∞–Ω–∏–µ –Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –ø—Ä–æ—Å—Ä–æ—á–∫—É –ø–ª–∞—Ç–µ–∂–µ–π –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç.",
      "type": "warning"
    }
  ]
}
```

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **DocumentProcessor** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å —è–∫–æ—Ä—è–º–∏ (anchor comments) –≤ LLM
2. **FakeAdapter** –∏–∑–≤–ª–µ–∫–∞–µ—Ç —è–∫–æ—Ä—è –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π JSON
3. **LlmResponseParser** –ø–∞—Ä—Å–∏—Ç JSON –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Å–µ–∫—Ü–∏–∏ —Å —è–∫–æ—Ä—è–º–∏
4. **DocumentProcessor** –∑–∞–º–µ–Ω—è–µ—Ç —è–∫–æ—Ä—è –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
5. –ò—Ç–æ–≥–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–µ—Ä–µ–≤–æ–¥—ã –∏ —Ä–∏—Å–∫–∏, –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –º–µ—Å—Ç–∞

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```php
// –í PHPUnit —Ç–µ—Å—Ç–∞—Ö
config(['llm.default' => 'fake']);

// API —Ç–µ—Å—Ç —Å —Ñ–µ–π–∫–æ–≤—ã–º –∞–¥–∞–ø—Ç–µ—Ä–æ–º
$response = $this->postJson('/api/v1/documents', [
    'file' => UploadedFile::fake()->create('test.pdf'),
    'task_type' => 'translation'
]);

$response->assertStatus(200);
```

## üí° –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–µ–π–∫–æ–≤—ã–π –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è:
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∏ UI/UX –±–µ–∑ API –∑–∞—Ç—Ä–∞—Ç
- –ù–∞–ø–∏—Å–∞–Ω–∏—è –∏ –æ—Ç–ª–∞–¥–∫–∏ —Ç–µ—Å—Ç–æ–≤
- –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–π –∏ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚ùå –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π Claude –¥–ª—è:
- Production –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –§–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞
- –ü–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- –û—Ü–µ–Ω–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –≠–∫—Å–ø–æ—Ä—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON –≤–º–µ—Å—Ç–æ HTML

–ï—Å–ª–∏ –ø—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ JSON –≤–º–µ—Å—Ç–æ —Å–≤–µ—Ä—Å—Ç–∞–Ω–Ω–æ–π HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—ã, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –µ—Å—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ —Å—Ç–∞—Ä–æ–º —Ñ–æ—Ä–º–∞—Ç–µ.

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
php artisan documents:fix-results --dry-run

# –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
php artisan documents:fix-results
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç –≤—Å–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏ –ø—Ä–∏–≤–µ–¥–µ—Ç –∏—Ö –∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É:
- –ë—ã–ª–æ: `result` –∫–∞–∫ —Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ –º–∞—Å—Å–∏–≤ –±–µ–∑ –∫–ª—é—á–∞ `content`
- –°—Ç–∞–ª–æ: `result` –∫–∞–∫ –º–∞—Å—Å–∏–≤ `['content' => $markdown]`

---

**üí∞ –≠–∫–æ–Ω–æ–º–∏—è**: –§–µ–π–∫–æ–≤—ã–π –∞–¥–∞–ø—Ç–µ—Ä –º–æ–∂–µ—Ç —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å —Å–æ—Ç–Ω–∏ –¥–æ–ª–ª–∞—Ä–æ–≤ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!