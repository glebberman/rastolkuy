# üß™ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é Legal Translator

## üìã –û–±–∑–æ—Ä

–î–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ–¥—É—Ä—ã —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä–µ–≤–æ–¥–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ Legal Translator, –∞ —Ç–∞–∫–∂–µ —Ä–∞–±–æ—Ç—É —Å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏.

## üéØ –¢–∏–ø—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

#### Unit —Ç–µ—Å—Ç—ã
```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö unit —Ç–µ—Å—Ç–æ–≤
php artisan test --testsuite=Unit

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
php artisan test tests/Unit/Services/Export/ContentProcessorTest.php

# –ó–∞–ø—É—Å–∫ –±–µ–Ω—á–º–∞—Ä–∫ —Ç–µ—Å—Ç–æ–≤
php artisan test tests/Unit/Services/Export/ContentProcessorBenchmarkTest.php
```

#### Feature —Ç–µ—Å—Ç—ã
```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö feature —Ç–µ—Å—Ç–æ–≤
php artisan test --testsuite=Feature

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –¥–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç–∞
php artisan test tests/Feature/DocumentProcessingApiTest.php

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
php artisan test tests/Feature/DocumentTranslationIntegrationTest.php
```

#### –ü–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
php artisan test --coverage

# –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ –ø–æ–∫—Ä—ã—Ç–∏—è
php artisan test

# –¢–µ—Å—Ç—ã —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
php artisan test --verbose
```

### 2. –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑

```bash
# PHPStan Level 9 –∞–Ω–∞–ª–∏–∑
./vendor/bin/phpstan analyse --level=9

# –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–∞–ø–∫–∏
./vendor/bin/phpstan analyse app/Services/Export/ --level=9

# –ë—ã—Å—Ç—Ä–∞—è –∫–æ–º–∞–Ω–¥–∞ —á–µ—Ä–µ–∑ task
task phpstan
```

### 3. –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## üìÑ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã

#### 1. –î–æ–≥–æ–≤–æ—Ä –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (`document_translation_response.json`)
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–ª–Ω—ã–π –¥–æ–≥–æ–≤–æ—Ä –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–∞–π—Ç–∞ –∑–∞ 150,000‚ÇΩ
- **–°–µ–∫—Ü–∏–∏**: 7 —Ä–∞–∑–¥–µ–ª–æ–≤ –æ—Ç –ø—Ä–µ–¥–º–µ—Ç–∞ –¥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Å–ø–æ—Ä–æ–≤
- **–†–∏—Å–∫–∏**: 6 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ä–∏—Å–∫–æ–≤ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ—Å—Ç-–∫–µ–π—Å –¥–ª—è –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

#### 2. –¢—Ä—É–¥–æ–≤–æ–π –¥–æ–≥–æ–≤–æ—Ä (`contract_employment_response.json`)
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –î–æ–≥–æ–≤–æ—Ä —Å IT-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º –∑–∞—Ä–ø–ª–∞—Ç–æ–π 250,000‚ÇΩ
- **–°–µ–∫—Ü–∏–∏**: 7 —Ä–∞–∑–¥–µ–ª–æ–≤ –æ—Ç —Å—Ç–æ—Ä–æ–Ω –¥–æ —Ä–∞—Å—Ç–æ—Ä–∂–µ–Ω–∏—è
- **–†–∏—Å–∫–∏**: 5 —Ä–∏—Å–∫–æ–≤ –≤–∫–ª—é—á–∞—è –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ HR-–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

#### 3. –î–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã (`contract_lease_response.json`)
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ê—Ä–µ–Ω–¥–∞ –∫–≤–∞—Ä—Ç–∏—Ä—ã –∑–∞ 85,000‚ÇΩ —Å –¥–µ–ø–æ–∑–∏—Ç–æ–º 170,000‚ÇΩ
- **–°–µ–∫—Ü–∏–∏**: 7 —Ä–∞–∑–¥–µ–ª–æ–≤ –æ—Ç —Å—Ç–æ—Ä–æ–Ω –¥–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- **–†–∏—Å–∫–∏**: 6 —Ä–∏—Å–∫–æ–≤ –≤–∫–ª—é—á–∞—è –≤—ã—Å–æ–∫–∏–µ –ø–µ–Ω–∏
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏

#### 4. –ü—Ä–æ—Å—Ç–æ–π –¥–æ–≥–æ–≤–æ—Ä (`contract_simple_response.json`)
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –¥–æ–≥–æ–≤–æ—Ä –Ω–∞ 50,000‚ÇΩ –∑–∞ 30 –¥–Ω–µ–π
- **–°–µ–∫—Ü–∏–∏**: 3 –±–∞–∑–æ–≤—ã—Ö —Ä–∞–∑–¥–µ–ª–∞
- **–†–∏—Å–∫–∏**: 2 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –Ω–µ–ø–æ–ª–Ω–æ—Ç–µ
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ edge cases

### –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

#### 1. –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–π JSON (`invalid_documents/malformed_json.json`)
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON —Å –ª–∏—à–Ω–µ–π –∑–∞–ø—è—Ç–æ–π
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞

#### 2. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —è–∫–æ—Ä—è (`invalid_documents/missing_anchors.json`)
- **–ü—Ä–æ–±–ª–µ–º–∞**: –î–æ–∫—É–º–µ–Ω—Ç –±–µ–∑ —Å–∏—Å—Ç–µ–º—ã —è–∫–æ—Ä–µ–π
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ fallback –ª–æ–≥–∏–∫–∏

#### 3. –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç (`invalid_documents/corrupted_content.json`)
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —è–∫–æ—Ä—è –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –ø–∞—Ä—Å–µ—Ä–∞

## üé≠ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Ñ–µ–π–∫–æ–≤—ã–π LLM –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ

```bash
# –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ —Ñ–µ–π–∫–æ–≤—ã–π –∞–¥–∞–ø—Ç–µ—Ä (–±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö API –≤—ã–∑–æ–≤–æ–≤)
php artisan llm:switch fake --test

# –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π Claude API
php artisan llm:switch claude --test
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ñ–µ–π–∫–æ–≤–æ–≥–æ –∞–¥–∞–ø—Ç–µ—Ä–∞

#### ‚úÖ **–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**
- **–ë–µ–∑ –∑–∞—Ç—Ä–∞—Ç**: –ù–∏–∫–∞–∫–∏—Ö —Ä–µ–∞–ª—å–Ω—ã—Ö API –≤—ã–∑–æ–≤–æ–≤ –∫ Claude
- **–ë—ã—Å—Ç—Ä–æ—Ç–∞**: –û—Ç–≤–µ—Ç—ã –∑–∞ 0.5 —Å–µ–∫—É–Ω–¥—ã (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç—å**: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
- **–î–µ—Ç–µ–∫—Ü–∏—è —Ç–∏–ø–æ–≤**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞

#### ‚úÖ **–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ**
- **3 —Ç–∏–ø–∞ –¥–æ–≥–æ–≤–æ—Ä–æ–≤**: –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, —Ç—Ä—É–¥–æ–≤–æ–π, –∞—Ä–µ–Ω–¥–∞
- **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ —è–∫–æ—Ä—è**: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç `<!-- SECTION_ANCHOR_id -->`
- **–†–∞–∑–ª–∏—á–Ω—ã–µ —Ä–∏—Å–∫–∏**: risk, warning, contradiction
- **–£–º–Ω–∞—è –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è**: –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Å—É–º–º—ã –∏–∑ –≤—Ö–æ–¥–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### –í `.env` —Ñ–∞–π–ª–µ:
```env
# –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä
LLM_DEFAULT_PROVIDER=fake

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–µ–π–∫–æ–≤–æ–≥–æ –∞–¥–∞–ø—Ç–µ—Ä–∞
FAKE_LLM_BASE_DELAY=0.5        # –ó–∞–¥–µ—Ä–∂–∫–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
FAKE_LLM_SIMULATE_ERRORS=false # –°–∏–º—É–ª—è—Ü–∏—è –æ—à–∏–±–æ–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```

#### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ:
```php
// –í —Ç–µ—Å—Ç–∞—Ö –∏–ª–∏ —Å–µ—Ä–≤–∏—Å–∞—Ö
app()->bind(LLMAdapterInterface::class, FakeAdapter::class);

// –°–æ–∑–¥–∞–Ω–∏–µ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
$fakeAdapter = new FakeAdapter(
    baseDelay: 0.1,           // –ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã
    shouldSimulateErrors: true // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
);
```

### –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤ —Ñ–µ–π–∫–æ–≤–æ–≥–æ –∞–¥–∞–ø—Ç–µ—Ä–∞

#### –î–æ–≥–æ–≤–æ—Ä –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```json
{
  "content": "## 1. –ü–†–ï–î–ú–ï–¢ –î–û–ì–û–í–û–†–ê\n\n–ó–∞–∫–∞–∑—á–∏–∫ –ø–æ—Ä—É—á–∞–µ—Ç...\n\n<!-- SECTION_ANCHOR_section_1_predmet -->",
  "anchors": [
    {
      "id": "section_1_predmet",
      "title": "1. –ü–†–ï–î–ú–ï–¢ –î–û–ì–û–í–û–†–ê",
      "translation": "–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏: –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –±—É–¥–µ—Ç –¥–µ–ª–∞—Ç—å —Å–∞–π—Ç..."
    }
  ],
  "risks": [
    {
      "type": "risk",
      "text": "–ù–µ—Ç —á–µ—Ç–∫–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è..."
    }
  ]
}
```

#### –¢—Ä—É–¥–æ–≤–æ–π –¥–æ–≥–æ–≤–æ—Ä:
```json
{
  "content": "## 1. –†–ê–ë–û–¢–û–î–ê–¢–ï–õ–¨ –ò –†–ê–ë–û–¢–ù–ò–ö\n\n–†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å: –û–û–û \"–¢–µ—Ö–Ω–æ–°—Ç–∞—Ä\"...",
  "anchors": [...],
  "risks": [
    {
      "type": "warning",
      "text": "–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö –≥–∞—Ä–∞–Ω—Ç–∏—è—Ö..."
    }
  ]
}
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ñ–µ–π–∫–æ–≤—ã–º –∞–¥–∞–ø—Ç–µ—Ä–æ–º

```php
// –í —Ç–µ—Å—Ç–∞—Ö
class DocumentProcessingTest extends TestCase
{
    protected function setUp(): void
    {
        parent::setUp();

        // –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ —Ñ–µ–π–∫–æ–≤—ã–π –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤
        config(['llm.default' => 'fake']);
    }

    public function testDocumentTranslation(): void
    {
        $response = $this->postJson('/api/v1/documents', [
            'file' => UploadedFile::fake()->create('test.pdf'),
            'task_type' => 'translation'
        ]);

        $response->assertStatus(200);
        // –î–æ–∫—É–º–µ–Ω—Ç –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω —Ñ–µ–π–∫–æ–≤—ã–º –∞–¥–∞–ø—Ç–µ—Ä–æ–º
    }
}
```

## üîß –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
php artisan serve

# –ó–∞–ø—É—Å–∫ –æ—á–µ—Ä–µ–¥–µ–π (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
php artisan queue:work

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –æ—á–µ—Ä–µ–¥–µ–π
./bin/queue-status.sh status
```

### –ë–∞–∑–æ–≤—ã–µ API —Ç–µ—Å—Ç—ã

#### 1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞

```bash
# POST /api/v1/documents
curl -X POST http://localhost:8000/api/v1/documents \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "file=@/path/to/test.pdf" \
  -F "task_type=translation" \
  -F "anchor_at_start=false"
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "–î–æ–∫—É–º–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –∏ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω –≤ –æ—á–µ—Ä–µ–¥—å –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É",
  "data": {
    "id": "uuid-here",
    "status": "pending",
    "filename": "test.pdf"
  }
}
```

#### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
# GET /api/v1/documents/{uuid}
curl -X GET http://localhost:8000/api/v1/documents/{uuid} \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**–°—Ç–∞—Ç—É—Å—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞:**
- `pending` - –≤ –æ—á–µ—Ä–µ–¥–∏
- `processing` - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è
- `completed` - –≥–æ—Ç–æ–≤
- `failed` - –æ—à–∏–±–∫–∞

#### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

```bash
# GET /api/v1/documents/{uuid}/result
curl -X GET http://localhost:8000/api/v1/documents/{uuid}/result \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "success": true,
  "data": {
    "id": "uuid",
    "filename": "test.pdf",
    "result": {
      "content": "–ü–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å —è–∫–æ—Ä—è–º–∏",
      "anchors": [...],
      "risks": [...]
    },
    "processing_time_seconds": 45.2,
    "cost_usd": 0.23
  }
}
```

#### 4. –£–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞

```bash
# DELETE /api/v1/documents/{uuid}
curl -X DELETE http://localhost:8000/api/v1/documents/{uuid} \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤

#### PDF –¥–æ–∫—É–º–µ–Ω—Ç—ã
```bash
# –ó–∞–≥—Ä—É–∑–∫–∞ PDF
curl -X POST http://localhost:8000/api/v1/documents \
  -F "file=@contract.pdf" \
  -F "task_type=translation"
```

#### DOCX –¥–æ–∫—É–º–µ–Ω—Ç—ã
```bash
# –ó–∞–≥—Ä—É–∑–∫–∞ DOCX
curl -X POST http://localhost:8000/api/v1/documents \
  -F "file=@agreement.docx" \
  -F "task_type=analysis"
```

#### TXT –¥–æ–∫—É–º–µ–Ω—Ç—ã
```bash
# –ó–∞–≥—Ä—É–∑–∫–∞ TXT
curl -X POST http://localhost:8000/api/v1/documents \
  -F "file=@simple.txt" \
  -F "task_type=translation"
```

## üé≠ –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞**
   ```bash
   curl -X POST .../documents -F "file=@test.pdf"
   ```

2. **–û–∂–∏–¥–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
   curl -X GET .../documents/{uuid}
   ```

3. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞**
   ```bash
   curl -X GET .../documents/{uuid}/result
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞**
   - –í—Å–µ —è–∫–æ—Ä—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
   - –ü–µ—Ä–µ–≤–æ–¥—ã –ø–æ–Ω—è—Ç–Ω—ã
   - –†–∏—Å–∫–∏ –≤—ã—è–≤–ª–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞**
   ```bash
   curl -X POST .../documents -F "file=@image.jpg"
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏**
   ```json
   {
     "success": false,
     "error": {
       "type": "validation_error",
       "code": "UNSUPPORTED_FORMAT",
       "details": "–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è"
     }
   }
   ```

3. **–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–≥–æ —Ñ–∞–π–ª–∞**
   ```bash
   curl -X POST .../documents -F "file=@huge_file.pdf"
   ```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –±–æ–ª—å—à–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞** (>50 —Å—Ç—Ä–∞–Ω–∏—Ü)
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏**
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏**
4. **–ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞**

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

#### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏**: < 2 –º–∏–Ω—É—Ç—ã –¥–ª—è 20 —Å—Ç—Ä–∞–Ω–∏—Ü
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏**: < 512MB –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç
- **–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å**: 10 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

#### –ö–∞—á–µ—Å—Ç–≤–æ
- **–ü–æ–∫—Ä—ã—Ç–∏–µ —è–∫–æ—Ä—è–º–∏**: > 95% —Å–µ–∫—Ü–∏–π
- **–¢–æ—á–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–≤–æ–¥–∞**: —Å—É–±—ä–µ–∫—Ç–∏–≤–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
- **–í—ã—è–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–æ–≤**: > 80% —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

#### –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏**: > 99%
- **–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ API**: < 500ms
- **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞**: > 99.9%

### –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

```bash
# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
tail -f storage/logs/laravel.log

# –õ–æ–≥–∏ –æ—á–µ—Ä–µ–¥–µ–π
tail -f storage/logs/queue.log

# –õ–æ–≥–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
tail -f /var/log/nginx/access.log
```

## üö® –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 1. –î–æ–ª–≥–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—á–µ—Ä–µ–¥–∏
php artisan queue:work --verbose

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å worker'—ã
./bin/queue-status.sh restart
```

#### 2. –û—à–∏–±–∫–∏ Claude API
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API –∫–ª—é—á
echo $CLAUDE_API_KEY

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–∏–º–∏—Ç—ã
curl -H "x-api-key: $CLAUDE_API_KEY" \
  https://api.anthropic.com/v1/messages
```

#### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
php artisan migrate:status

# –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à
php artisan cache:clear
php artisan config:clear
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ MIME-—Ç–∏–ø–æ–≤
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ (50MB)
   - –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –≤–∏—Ä—É—Å—ã

2. **–ó–∞—â–∏—Ç–∞ –æ—Ç –∏–Ω—ä–µ–∫—Ü–∏–π**
   - SQL injection —Ç–µ—Å—Ç—ã
   - XSS –∑–∞—â–∏—Ç–∞
   - CSRF —Ç–æ–∫–µ–Ω—ã

3. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**
   - JWT —Ç–æ–∫–µ–Ω—ã
   - Rate limiting
   - IP whitelist

### –¢–µ—Å—Ç –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

```bash
# –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞
curl -X POST .../documents -F "file=@malware.exe"

# –ü–æ–ø—ã—Ç–∫–∞ SQL –∏–Ω—ä–µ–∫—Ü–∏–∏
curl -X GET ".../documents/'; DROP TABLE users; --"

# –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤
for i in {1..100}; do
  curl -X GET .../documents &
done
```

## üìà –û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã

```bash
# –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
php artisan test --coverage-html=reports/coverage

# –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
./vendor/bin/phpstan analyse --error-format=json > reports/phpstan.json

# –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
php artisan test tests/Unit/Services/Export/ContentProcessorBenchmarkTest.php
```

### –†—É—á–Ω—ã–µ –æ—Ç—á–µ—Ç—ã

1. **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
   - –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
   - –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã

2. **–û—Ç—á–µ—Ç –ø–æ –∫–∞—á–µ—Å—Ç–≤—É –ø–µ—Ä–µ–≤–æ–¥–∞**
   - –ü—Ä–∏–º–µ—Ä—ã —Ö–æ—Ä–æ—à–∏—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤
   - –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –º–µ—Å—Ç–∞
   - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

## üéì –û–±—É—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã

### –û—Å–Ω–æ–≤—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **–ü—Ä–∏–Ω—Ü–∏–ø—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**
   - Unit vs Integration vs E2E
   - TDD –ø–æ–¥—Ö–æ–¥
   - –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

2. **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã**
   - PHPUnit –¥–ª—è –∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤
   - cURL –¥–ª—è API —Ç–µ—Å—Ç–æ–≤
   - PHPStan –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

3. **–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏**
   - –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Arrange-Act-Assert
   - –ò–∑–æ–ª—è—Ü–∏—è —Ç–µ—Å—Ç–æ–≤

### –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

- [ ] Unit —Ç–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã
- [ ] Feature —Ç–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- [ ] API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞
- [ ] –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∞
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ

---

**–î–æ–∫—É–º–µ–Ω—Ç –æ–±–Ω–æ–≤–ª–µ–Ω**: 2025-01-20
**–í–µ—Ä—Å–∏—è**: 1.0
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ**: –ö–æ–º–∞–Ω–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Legal Translator