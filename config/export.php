<?php

declare(strict_types=1);

return [
    /*
    |--------------------------------------------------------------------------
    | Export Configuration
    |--------------------------------------------------------------------------
    |
    | Настройки для экспорта документов в различные форматы.
    |
    */

    /*
    |--------------------------------------------------------------------------
    | Export Expiration
    |--------------------------------------------------------------------------
    |
    | Время жизни экспортированных файлов. После истечения этого времени
    | файлы автоматически удаляются для экономии места на диске.
    |
    */

    'expiration' => [
        // Время жизни в часах для разных тарифных планов
        'guest' => 1,      // 1 час для гостей
        'basic' => 24,     // 24 часа для базового тарифа
        'pro' => 72,       // 72 часа для Pro тарифа
        'enterprise' => 168, // 7 дней для корпоративных клиентов

        // Время жизни по умолчанию (в часах)
        'default' => 24,
    ],

    /*
    |--------------------------------------------------------------------------
    | File Size Limits
    |--------------------------------------------------------------------------
    |
    | Ограничения на размер экспортируемых файлов для предотвращения
    | перегрузки сервера и злоупотреблений.
    |
    */

    'file_size' => [
        // Максимальный размер файла экспорта в байтах (50MB)
        'max_size' => 50 * 1024 * 1024,

        // Ограничения по тарифным планам
        'limits' => [
            'guest' => 5 * 1024 * 1024,    // 5MB для гостей
            'basic' => 20 * 1024 * 1024,   // 20MB для базового
            'pro' => 50 * 1024 * 1024,     // 50MB для Pro
            'enterprise' => 100 * 1024 * 1024, // 100MB для корпоративных
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Rate Limiting
    |--------------------------------------------------------------------------
    |
    | Ограничения на количество экспортов для предотвращения злоупотреблений
    | и защиты ресурсов сервера.
    |
    */

    'rate_limits' => [
        // Максимальное количество экспортов в час
        'per_hour' => [
            'guest' => 3,
            'basic' => 20,
            'pro' => 100,
            'enterprise' => 500,
        ],

        // Максимальное количество экспортов в день
        'per_day' => [
            'guest' => 5,
            'basic' => 100,
            'pro' => 1000,
            'enterprise' => 5000,
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Storage Settings
    |--------------------------------------------------------------------------
    |
    | Настройки хранения экспортированных файлов.
    |
    */

    'storage' => [
        // Диск для хранения экспортов
        'disk' => env('EXPORT_STORAGE_DISK', 'local'),

        // Базовая директория для экспортов
        'directory' => 'exports',

        // Автоматическая очистка истекших файлов
        'auto_cleanup' => env('EXPORT_AUTO_CLEANUP', true),

        // Интервал очистки в минутах
        'cleanup_interval' => env('EXPORT_CLEANUP_INTERVAL', 60),
    ],

    /*
    |--------------------------------------------------------------------------
    | Format Settings
    |--------------------------------------------------------------------------
    |
    | Настройки для различных форматов экспорта.
    |
    */

    'formats' => [
        'html' => [
            'enabled' => true,
            'mime_type' => 'text/html',
            'extension' => 'html',
        ],

        'docx' => [
            'enabled' => true,
            'mime_type' => 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
            'extension' => 'docx',
        ],

        'pdf' => [
            'enabled' => true,
            'mime_type' => 'application/pdf',
            'extension' => 'pdf',
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Security Settings
    |--------------------------------------------------------------------------
    |
    | Настройки безопасности для экспорта документов.
    |
    */

    'security' => [
        // Длина токена доступа к файлу
        'token_length' => 64,

        // Проверка принадлежности пользователя к документу
        'verify_ownership' => true,

        // Логирование доступа к экспортам
        'log_access' => true,

        // Ограничение по IP адресу (для будущего белого списка)
        'ip_restrictions' => false,
    ],
];
